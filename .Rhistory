c<-rbind(bail.data.0[1,],bail.data.0[2,],bail.data.0[3,],bail.data.0[4,])
bail.data<-rbind(bail.data.0[1,],bail.data.0[2,],bail.data.0[3,],bail.data.0[4,])
bail.data.0 <- table(bail2$result, as.character(bail2$racetype))
View(bail.data.0)
bail.data.0
bail.data.0[4,0]
3
bail.data.0[3,0]
bail.data.0[1,]
bail.data<-rbind(bail.data.0[1,],bail.data.0[2,],bail.data.0[3,],bail.data.0[4,])
bail.data
library(shiny)
library(shinydashboard)
library(highcharter)
library(dplyr)
library(tidyr)
library(rdrop2)
library(lubridate)
#library(RCurl)
library(rvest)
library(stringr)
library(shinyBS)
library(shinythemes)
library(shinyLP)
bookings<-read.csv(url("http://dart.ncsa.uiuc.edu/stuffed/bpnj/daily_jail_log/djl.all.csv"))
bookings<-subset(bookings,bookings$Race != "")
bookings$BookDate <- as.Date(bookings$BookDate, "%m/%d/%Y")
booking.today<-subset(bookings, as.Date(bookings$BookDate, "%m/%d/%Y") ==data.sorted$Date[1])
per.black=sum(bookings$Race=="B")/length(bookings)
per.white=sum(bookings$Race=="W")/length(bookings)
per.hispanic=sum(bookings$Race =="H")/length(bookings)
per.others=ifelse((100-per.black-per.white-per.hispanic)<0,0,100-per.black-per.white-per.hispanic)
racial <- cbind(per.black, per.white, per.hispanic, per.others)
View(racial)
racial <- rbind(racial, c(13, 73, 6, 8))
racial.category <-c("Black", "White", "Hispanic", "Others")
colnames(racial) <- racial.category
rownames(racial) <- c("Jail", "Champaign County")
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
View(bail2)
bail.data.0 <- table(bail2$result, as.character(bail2$racetype))
View(bail)
View(bail)
View(bail.data)
bail.data<-cbind(bail.data.0[,1],bail.data.0[,4],bail.data.0[,2],bail.data.0[,3])
View(bail.data)
racial.category <-c("Black", "White", "Hispanic", "Others")
colnames(racial) <- racial.category
bail.data.category <-c("Black", "White", "Hispanic", "Others")
colnames(bail.data) <- bail.data.category
View(bail.data)
View(bail.data)
bail.data$Black
bail.data<-as.data.frame(bail.data)
bail.data$Black
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = bail.data$Black, type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = bail.data$White, type = "column",color="#3185d3")
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
bail.data.2 <- as.data.frame(table(bail2$result, as.character(bail2$racetype)))
View(bail.data.2)
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = bail.data$Black, type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = bail.data$White, type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = bail.data$Hispanic, type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = bail.data$Others, type = "column",color="#e9ed6b")
View(bail.data)
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[2,1],bail.data[3,1],bail.data[4,1]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,2],bail.data[1,3],bail.data[1,4]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
View(bail.data)
View(bail.data.2)
colnames(bail.data.2) <- c("Result", "Race", "Freq")
unbail<-subset(bail.data.2, select=c("Race","Freq"),bail.data.2$Result=="Still in Jail at End of Day of Booking")
View(unbail)
colnames(widthy) <- "UBPerct"
for (i in 1:(length(widthy$UBPerct))) {
#k[i] <- (paste0(daye[i], " to ", daye[i+1], ""))
widthy$UBPerct[i] <- round((unbail$Freq[i] / sum(unbail$Freq)*100) ,digit=2)
}
unbail.data <- cbind(unbail, widthy)
widthy <- data.frame(replicate(1,sample(0:1,4,rep=TRUE)))
colnames(widthy) <- "UBPerct"
for (i in 1:(length(widthy$UBPerct))) {
#k[i] <- (paste0(daye[i], " to ", daye[i+1], ""))
widthy$UBPerct[i] <- round((unbail$Freq[i] / sum(unbail$Freq)*100) ,digit=2)
}
unbail.data <- cbind(unbail, widthy)
View(unbail.data)
View(bail)
unbail<-subset(bail,select=c("result", "racetype"),bail$racetype=="Still in Jail at End of Day of Booking")
unbail<-subset(bail,select=c("BookDate","result", "racetype"),bail$racetype=="Still in Jail at End of Day of Booking")
View(unbail)
unbail<-subset(bail,select=c("BookDate","result", "racetype"),racetype=="Still in Jail at End of Day of Booking")
View(unbail)
unbail<-subset(bail,select=c("BookDate","result", "racetype"))
View(unbail)
unbail<-subset(bail,select=c("BookDate","result", "racetype"),bail$result=="Still in Jail at End of Day of Booking")
bail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
View(bail2)
bail.data.2 <- table(bail2$result, as.character(bail2$racetype))
bail.data.2 <- table(bail2$result, as.character(bail2$racetype))
table(bail2$result, as.character(bail2$racetype)
)
rsum(bail.data.2)
nrow(bail.data.2)
rowSums(bail.data.2)
ub <- table(bail2$result, as.character(bail2$racetype))
ub[1,2]
ub[1,1]/rowSums(ub)
ub.pct<-c(round(ub[1,1]/rowSums(ub)*100,2),round(ub[1,2]/rowSums(ub)*100,2),round(ub[1,3]/rowSums(ub)*100,2),round(ub[1,4]/rowSums(ub)*100,2))
ub.pct
ub.pct<-c(round(ub[1,1]/rowSums(ub)*100,2),round(ub[1,4]/rowSums(ub)*100,2),round(ub[1,2]/rowSums(ub)*100,2),round(ub[1,3]/rowSums(ub)*100,2))
ub.pct
table((bail2$BookDate), as.character(bail2$racetype))
rep0<-as.data.frame(table((bail2$BookDate), as.character(bail2$racetype)))
colnames(rep0) <- c("BookingDate","racetype","Freq")
View(rep0)
rep<-aggregate(rep0$Freq,list(rep0$racetype),sum)
View(rep)
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
rep0
colS
colSums(rep0)
class(colSums(rep0))
bk<-colSums(rep0)
View(bk)
rowSums(bk)
rowsum(bk)
c(colSums(rep0))
bk<-c(colSums(rep0))
class(bk)
rowsum(bk)
rowSums(bk)
sum(bk)
ub
bookings<-read.csv(url("http://dart.ncsa.uiuc.edu/stuffed/bpnj/daily_jail_log/djl.all.csv"))
bookings<-subset(bookings,bookings$Race != "")
bookings$BookDate <- as.Date(bookings$BookDate, "%m/%d/%Y")
bail<-bookings
bail$result<-ifelse(bail$BnR=="BNR","Book and Release",
ifelse(bail$RoR=="RoR", "Release on Recognizance",
ifelse(bail$RBail=="Bail","Bail Paid","Still in Jail at End of Day of Booking")))
bail$racetype<-ifelse(bail$Race=="B","Black",
ifelse(bail$Race=="W","White",
ifelse(bail$Race=="H","Hispanic","Other")))
unbail<-subset(bail,select=c("BookDate","result", "racetype"),bail$result=="Still in Jail at End of Day of Booking")
View(bail)
View(unbail)
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
View(bail2)
bail.data.0 <- table(bail2$result, as.character(bail2$racetype))
bail.data<-cbind(bail.data.0[,1],bail.data.0[,4],bail.data.0[,2],bail.data.0[,3])
bail.data.category <-c("Black", "White", "Hispanic", "Others")
colnames(bail.data) <- bail.data.category
unbail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,2],bail.data[1,3],bail.data[1,4]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
View(unbail)
View(unbail2)
ub <- table(bail2$result, as.character(bail2$racetype))
ub.pct<-c(round(ub[1,1]/rowSums(ub)*100,2),round(ub[1,4]/rowSums(ub)*100,2),round(ub[1,2]/rowSums(ub)*100,2),round(ub[1,3]/rowSums(ub)*100,2))
ub.pct
ub <- table(bail2$result, as.character(bail2$racetype))
ub
ub.pct<-c(round(ub[1,1]/rowSums(ub)*100,2),round(ub[1,4]/rowSums(ub)*100,2),round(ub[1,2]/rowSums(ub)*100,2),round(ub[1,3]/rowSums(ub)*100,2))
ub.pct
round(ub[1,1]/rowSums(ub)*100,2)
round(ub[1,1]/rowsum(ub[1,])*100,2)
rowsum(ub[1,])
ub[1,]
rowsum(ub[1,])
sum(c(ub[1,]))
c(round(ub[1,1]/sum(c(ub[1,]))*100,2),round(ub[1,4]/sum(c(ub[1,]))*100,2),round(ub[1,2]/sum(c(ub[1,]))*100,2),round(ub[1,3]/sum(c(ub[1,]))*100,2))
ub <- table(bail2$result, as.character(bail2$racetype))
ub
ub[,1]/rowSums(ub)
ub <- table(bail2$racetype, as.character(bail2$result))
ub
ub[1,]/colSums(ub)
ub.pct<-rbind(ub[1,]/colSums(ub),ub[4,]/colSums(ub),ub[2,]/colSums(ub),ub[3,]/colSums(ub))
ub.pct
View(ub.pct)
unbail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
ub <- table(unbail2$racetype, as.character(unbail2$result))
ub
ub[1,1]/rowsum(ub)
sum(ub[,1])
ub[1,1]/sum(ub[,1])
ub[4,1]/sum(ub[,1])
c(ub[1,1]/sum(ub[,1]),ub[4,1]/sum(ub[,1]),ub[2,1]/sum(ub[,1]),ub[3,1]/sum(ub[,1]))
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
rep0
View(bail2)
dim(bail2)
nrow(rep0)
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
nrow(bail2)
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
dim(rep0)
rep0
colSums(rep0)
bk<-colSums(rep0)
bk[1,2]
bk<-c(colSums(rep0))
bk
bk[1,2]
bk[1,0]
class(bk)
rowsum(bk)
colSums(rep0[1,])
rep[1,1]
rep0[1,1]
colSums(rep0[,1])
colsum(rep0[,1])
sum(rep0[,1])
bk<-c(sum(rep0[,1]),sum(rep0[,4]),sum(rep0[,2]),sum(rep0[,3]))
bk
sum(bk)
bk[1]
bk.pct<-c(round(bk[1]/sum(bk)*100,2),round(bk[2]/sum(bk)*100,2),round(bk[3]/sum(bk)*100,2),round(bk[4]/sum(bk)*100,2))
bk.pct
unbail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
ub <- table(unbail2$racetype, as.character(unbail2$result))
ub.pct<-c(ub[1,1]/sum(ub[,1]),ub[4,1]/sum(ub[,1]),ub[2,1]/sum(ub[,1]),ub[3,1]/sum(ub[,1]))
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
bk<-c(sum(rep0[,1]),sum(rep0[,4]),sum(rep0[,2]),sum(rep0[,3]))
bk.pct<-c(round(bk[1]/sum(bk)*100,2),round(bk[2]/sum(bk)*100,2),round(bk[3]/sum(bk)*100,2),round(bk[4]/sum(bk)*100,2))
pop.pct<-as.numeric(list("12.47","74.16","5.73","7.64"))
rep.category <-c("Black", "White", "Hispanic", "Others")
highchart() %>%
hc_title(text = "Figure 6: Comparison of Racial Distribution in Champaign County and in Correctional Facilities, in Selected Time Period") %>%
hc_yAxis(title = list(text = "Percentage"))%>%
hc_xAxis(categories = rep.category) %>%
hc_add_series(name = "Percentage in Champaign County's Total Population", data = pop.pct, type = "column",color="#434348") %>%
hc_add_series(name = "Percentage in Total Booking", data = bk.pct, type = "column",color="#3185d3")%>%
hc_add_series(name = "Percentage in People in Jail", data = ub.pct, type = "column",color="#67da4f")%>%
)
unbail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
ub <- table(unbail2$racetype, as.character(unbail2$result))
ub.pct<-c(ub[1,1]/sum(ub[,1]),ub[4,1]/sum(ub[,1]),ub[2,1]/sum(ub[,1]),ub[3,1]/sum(ub[,1]))
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
bk<-c(sum(rep0[,1]),sum(rep0[,4]),sum(rep0[,2]),sum(rep0[,3]))
bk.pct<-c(round(bk[1]/sum(bk)*100,2),round(bk[2]/sum(bk)*100,2),round(bk[3]/sum(bk)*100,2),round(bk[4]/sum(bk)*100,2))
pop.pct<-as.numeric(list("12.47","74.16","5.73","7.64"))
rep.category <-c("Black", "White", "Hispanic", "Others")
highchart() %>%
hc_title(text = "Figure 6: Comparison of Racial Distribution in Champaign County and in Correctional Facilities, in Selected Time Period") %>%
hc_yAxis(title = list(text = "Percentage"))%>%
hc_xAxis(categories = rep.category) %>%
hc_add_series(name = "Percentage in Champaign County's Total Population", data = pop.pct, type = "column",color="#434348") %>%
hc_add_series(name = "Percentage in Total Booking", data = bk.pct, type = "column",color="#3185d3")%>%
hc_add_series(name = "Percentage in People in Jail", data = ub.pct, type = "column",color="#67da4f")
ub.pct
unbail2<-subset(unbail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
ub <- table(unbail2$racetype, as.character(unbail2$result))
ub.pct<-c(round(ub[1,1]/sum(ub[,1])*100,2),round(ub[4,1]/sum(ub[,1])*100,2),round(ub[2,1]/sum(ub[,1])*100,2),round(ub[3,1]/sum(ub[,1])*100,2))
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
rep0<-table((bail2$BookDate), as.character(bail2$racetype))
bk<-c(sum(rep0[,1]),sum(rep0[,4]),sum(rep0[,2]),sum(rep0[,3]))
bk.pct<-c(round(bk[1]/sum(bk)*100,2),round(bk[2]/sum(bk)*100,2),round(bk[3]/sum(bk)*100,2),round(bk[4]/sum(bk)*100,2))
pop.pct<-as.numeric(list("12.47","74.16","5.73","7.64"))
rep.category <-c("Black", "White", "Hispanic", "Others")
highchart() %>%
hc_title(text = "Figure 6: Comparison of Racial Distribution in Champaign County and in Correctional Facilities, in Selected Time Period") %>%
hc_yAxis(title = list(text = "Percentage"))%>%
hc_xAxis(categories = rep.category) %>%
hc_add_series(name = "Percentage in Champaign County's Total Population", data = pop.pct, type = "column",color="#434348") %>%
hc_add_series(name = "Percentage in Total Booking", data = bk.pct, type = "column",color="#3185d3")%>%
hc_add_series(name = "Percentage in People in Jail", data = ub.pct, type = "column",color="#67da4f")
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,2],bail.data[1,3],bail.data[1,4]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
runApp()
bookings<-read.csv(url("http://dart.ncsa.uiuc.edu/stuffed/bpnj/daily_jail_log/djl.all.csv"))
bookings<-subset(bookings,bookings$Race != "")
bookings$BookDate <- as.Date(bookings$BookDate, "%m/%d/%Y")
bail<-bookings
bail$result<-ifelse(bail$BnR=="BNR","Book and Release",
ifelse(bail$RoR=="RoR", "Release on Recognizance",
ifelse(bail$RBail=="Bail","Bail Paid","Still in Jail at End of Day of Booking")))
bail$racetype<-ifelse(bail$Race=="B","Black",
ifelse(bail$Race=="W","White",
ifelse(bail$Race=="H","Hispanic","Other")))
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
bail.data.0 <- table(bail2$result, as.character(bail2$racetype))
bail.data<-cbind(bail.data.0[,1],bail.data.0[,4],bail.data.0[,2],bail.data.0[,3])
bail.data.category <-c("Black", "White", "Hispanic", "Others")
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,2],bail.data[1,3],bail.data[1,4]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
bookings<-read.csv(url("http://dart.ncsa.uiuc.edu/stuffed/bpnj/daily_jail_log/djl.all.csv"))
bookings<-subset(bookings,bookings$Race != "")
bookings$BookDate <- as.Date(bookings$BookDate, "%m/%d/%Y")
bail<-bookings
bail$result<-ifelse(bail$BnR=="BNR","Book and Release",
ifelse(bail$RoR=="RoR", "Release on Recognizance",
ifelse(bail$RBail=="Bail","Bail Paid","Still in Jail at End of Day of Booking")))
bail$racetype<-ifelse(bail$Race=="B","Black",
ifelse(bail$Race=="W","White",
ifelse(bail$Race=="H","Hispanic","Other")))
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
bail.data.0 <- table(bail2$result, as.character(bail2$racetype))
bail.data<-cbind(bail.data.0[,1],bail.data.0[,4],bail.data.0[,2],bail.data.0[,3])
bail.data.category <-c("Black", "White", "Hispanic", "Others")
colnames(bail.data) <- racial.category
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,2],bail.data[1,3],bail.data[1,4]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,2],bail.data[2,3],bail.data[2,4]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,2],bail.data[3,3],bail.data[3,4]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,2],bail.data[4,3],bail.data[4,4]), type = "column",color="#e9ed6b")
View(bail2)
bail.data.0
bail.data
bail<-bookings
bail$result<-ifelse(bail$BnR=="BNR","Book and Release",
ifelse(bail$RoR=="RoR", "Release on Recognizance",
ifelse(bail$RBail=="Bail","Bail Paid","Still in Jail at End of Day of Booking")))
bail$racetype<-ifelse(bail$Race=="B","Black",
ifelse(bail$Race=="W","White",
ifelse(bail$Race=="H","Hispanic","Other")))
bail.data.0[,1]
bail.data.0[1,]
class(bail.data.0[1,])
c(bail.data.0[1,])
bail2<-subset(bail,bail$BookDate>="2016-08-01" & bail$BookDate<="2016-10-01")
bail.data<- table(bail2$result, as.character(bail2$racetype))
c(bail.data[1,1],bail.data[1,4],bail.data[1,2],bail.data[1,3])
bail.data.category <-c("Black", "White", "Hispanic", "Others")
highchart() %>%
hc_title(text = "Figure 4: Number of People Released and In Custody after Booking, Broken Down by Race") %>%
hc_yAxis(title = list(text = "Number of People"))%>%
hc_xAxis(categories = bail.data.category) %>%
hc_add_series(name = "Bail Paid", data = c(bail.data[1,1],bail.data[1,4],bail.data[1,2],bail.data[1,3]), type = "column",color="#434348") %>%
hc_add_series(name = "Book and Release", data = c(bail.data[2,1],bail.data[2,4],bail.data[2,2],bail.data[2,3]), type = "column",color="#3185d3")%>%
hc_add_series(name = "Release on Recognizance", data = c(bail.data[3,1],bail.data[3,4],bail.data[3,2],bail.data[3,3]), type = "column",color="#67da4f")%>%
hc_add_series(name = "Still in Jail at End of Day of Booking", data = c(bail.data[4,1],bail.data[4,4],bail.data[4,2],bail.data[4,3]),type = "column",color="#e9ed6b")
runApp()
runApp()
runApp()
shiny::runApp('C:/00Cong Files/MUP2016FALL/494/Week_14_Materials/LP')
library("shinyLP", lib.loc="~/R/win-library/3.3")
runApp('C:/00Cong Files/MUP2016FALL/494/Week_14_Materials/LP')
library("shinyBS", lib.loc="~/R/win-library/3.3")
library("shinydashboard", lib.loc="~/R/win-library/3.3")
library("shinythemes", lib.loc="~/R/win-library/3.3")
library("shiny", lib.loc="~/R/win-library/3.3")
runApp('C:/00Cong Files/MUP2016FALL/494/Week_14_Materials/LP')
runApp()
??jumbotron
runApp()
library(rvest)
library(stringr)
jail <- read_html("Champaign County, IL Sheriff_ Inmate Lookup.html")
inmate.records <- jail %>%
html_nodes("#accordion") %>%
html_text()
inmate.records
### 1. Get inmate's name
inmate.names <- jail %>%
html_nodes("#accordion a") %>%
html_text()
inmate.names[1]
inmate.names.trim <- gsub("\\s+", " ", inmate.names)
inmate.names.trim <- str_trim(inmate.names.trim)
inmate.names.trim
### 2. Get inmate's race
inmate.race <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[4]/following-sibling::text()[1]') %>%
html_text()
inmate.race[1]
inmate.race.trim <- gsub("\\s+", " ", inmate.race)
inmate.race.trim <- str_trim(inmate.race.trim)
inmate.race.trim
### 3. Get inmate's age
inmate.age <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[3]/following-sibling::text()[1]') %>%
html_text()
inmate.age[1]
inmate.age.trim <- gsub("\\s+", " ", inmate.age)
inmate.age.trim <- str_trim(inmate.age.trim)
inmate.age.trim
### 4. Get inmate's bond
bond <- regexpr("Bond: [-+]?[0-9]*\\.?[0-9]+", inmate.records)
bondlength <- attr(bond,"match.length")
bond.info <- substr(inmate.records,bond+6,bond+bondlength)
bond.info
### 5. Get inmate's address
inmate.add <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[6]/following-sibling::text()[1]') %>%
html_text()
inmate.add[1]
inmate.add.trim <- gsub("\\s+", " ", inmate.add)
inmate.add.trim <- str_trim(inmate.add.trim)
inmate.add.trim
### 6. Get inmate's book date
book.date <- regexpr("Booked on: [-+]?[0-9]*\\/?[0-9]+\\/?[0-9]*", inmate.records)
datelength <- attr(book.date,"match.length")
book.date.trim <- substr(inmate.records,book.date+11,book.date+datelength-1)
book.date.trim
### Combine these vectors into a data frame object
inmate.info <- cbind(inmate.names.trim, inmate.race.trim, inmate.age.trim, bond.info, inmate.add.trim, book.date.trim, deparse.level = 1)
colnames(inmate.info) <- c("Name", "Race", "Age", "Bond", "Address", "Bookdate")
inmate.df <- as.data.frame(inmate.info)
View(inmate.df)
library(rvest)
library(stringr)
library(rdrop2)
jail <- read_html("Champaign County, IL Sheriff_ Inmate Lookup.html")
inmate.records <- jail %>%
html_nodes("#accordion") %>%
html_text()
inmate.records
inmate.names <- jail %>%
html_nodes("#accordion a") %>%
html_text()
inmate.names[1]
inmate.names.trim <- gsub("\\s+", " ", inmate.names)
inmate.names.trim <- str_trim(inmate.names.trim)
inmate.names.trim
### 2. Get inmate's race
inmate.race <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[4]/following-sibling::text()[1]') %>%
html_text()
inmate.race[1]
inmate.race.trim <- gsub("\\s+", " ", inmate.race)
inmate.race.trim <- str_trim(inmate.race.trim)
inmate.race.trim
### 3. Get inmate's age
inmate.age <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[3]/following-sibling::text()[1]') %>%
html_text()
inmate.age[1]
inmate.age.trim <- gsub("\\s+", " ", inmate.age)
inmate.age.trim <- str_trim(inmate.age.trim)
inmate.age.trim
### 4. Get inmate's bond
bond <- regexpr("Bond: [-+]?[0-9]*\\.?[0-9]+", inmate.records)
bondlength <- attr(bond,"match.length")
bond.info <- substr(inmate.records,bond+6,bond+bondlength)
bond.info
### 5. Get inmate's address
inmate.add <- jail %>%
html_nodes(xpath='//*/div/div[1]/div[1]/p/strong[6]/following-sibling::text()[1]') %>%
html_text()
inmate.add[1]
inmate.add.trim <- gsub("\\s+", " ", inmate.add)
inmate.add.trim <- str_trim(inmate.add.trim)
inmate.add.trim
### 6. Get inmate's book date
book.date <- regexpr("Booked on: [-+]?[0-9]*\\/?[0-9]+\\/?[0-9]*", inmate.records)
datelength <- attr(book.date,"match.length")
book.date.trim <- substr(inmate.records,book.date+11,book.date+datelength-1)
book.date.trim
### Combine these vectors into a data frame object
inmate.info <- cbind(inmate.names.trim, inmate.race.trim, inmate.age.trim, bond.info, inmate.add.trim, book.date.trim, deparse.level = 1)
colnames(inmate.info) <- c("Name", "Race", "Age", "Bond", "Address", "Bookdate")
inmate.df <- as.data.frame(inmate.info)
write.csv(data, "InmateLookup_120516.csv", row.names=FALSE)
View(inmate.df)
write.csv(inmate.df, "InmateLookup_120516.csv", row.names=FALSE)
shiny::runApp()
View(inmate.df)
write.csv(inmate.df, "InmateLookup.csv", row.names=FALSE)
View(JAD.df)
View(JOT.df)
write.csv(JOT.df, "JuvenileOffenceType.csv", row.names=FALSE)
write.csv(JAD.df, "JuvenileDetentionSummary.csv", row.names=FALSE)
View(JR.df)
write.csv(JR.df, "JuvenileDetentionByRace.csv", row.names=FALSE
)
runApp()
